---
title: "Homework 3"
author: "Henry Stoddard"
date: "9/24/2020"
output: github_document
---
## Problem 0
Creating initial markdown file and rendering to github doc

## Problem 1
```{r}
library(tidyverse)
library(p8105.datasets)
data("instacart")
```

This dataset contains `r nrow(instacart)` rows and ... columns.
Observations are the level of items in orders by user. There are user / order variables -- user ID, order ID, order day, and order hour. There are also item variables - name, asile, department, and some numeric codes.

How many aisles and which are most items from?

```{r}
instacart %>% count(aisle) %>% arrange(desc(n))
```

Making a plot!
```{r}
instacart %>% 
  count(aisle) %>% 
  filter(n > 10000) %>% 
  mutate(
    aisle = factor(aisle),
    aisle = fct_reorder(aisle, n)
  ) %>% 
  ggplot(aes(x = aisle, y = n)) +
  geom_point() +
    theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
```

Let's make a table!!

```{r}
instacart %>% 
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>% 
  group_by(aisle) %>% 
  count(product_name) %>% 
  mutate(rank = min_rank(desc(n))) %>% 
  filter(rank < 4) %>% 
  arrange(aisle, rank) %>% 
  knitr::kable()
```

Apples vs. Ice cream table

```{r}
instacart %>%
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) %>%
  group_by(product_name, order_dow) %>%
  summarise(mean_hour = mean(order_hour_of_day)) %>% 
  pivot_wider(
    names_from = order_dow,
    values_from = mean_hour
  )
```

## Problem 2

Loading and tidying data

```{r}
accel_df = read.csv("./data/accel_data.csv") %>% 
  janitor::clean_names()
```

part 1 also gonna pivot minute of day, make sure its numeric I think?

gonna be more group_by and summary for pt 2. for day of week as column it may start as alphabetical order, so use factor to order correctly

part3: get minute on x axis and activity count on y axis, then add in scatterplot and geom_line, use color for day of the week. conclusions will probably show stuff about how we sleep at night, active in day, maybe differences by weekday vs weekend

## Problem 3

gonna use count and rank for third sentence of part 1.
part 2 organize data using group_by station, year, month, and summarize by month(?), also gonna need to filter. use facet to make 2 panel plot. trends could look like global warming!

part 3 make 2 plots separate and then use patchwork to pull them together. first one should be contour/bin/or hex plot not scatter plot. second plot should be filter step, then showuse violin, box, or ridge plot showing one box per year